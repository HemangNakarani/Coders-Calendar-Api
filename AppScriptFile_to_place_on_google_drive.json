{"files":[{"id":"8bef69e6-404d-43c3-90af-1d13fdd7a3e6","name":"Code","type":"server_js","source":"function doGet(e){\n  \n  var ss \u003d SpreadsheetApp.openByUrl(\"YOUR SHEET LINK WHERE YOU WANT TO PLACE DATA\");\n  var sheet \u003d ss.getSheetByName(\"contests\");\n  \n  var td \u003d  new Date();\n  var currentdate \u003d Utilities.formatDate(td, \u0027GMT+0\u0027 , \"yyyy-MM-dd HH:mm:ss\");\n  currentdate \u003d currentdate.split(\" \").join(\"T\");\n  \n  var seconddate \u003d new Date();\n  seconddate.setDate(td.getDate() + 60);\n  seconddate  \u003d Utilities.formatDate(seconddate, \u0027GMT+0\u0027 , \"yyyy-MM-dd HH:mm:ss\");\n  seconddate \u003d seconddate.split(\" \").join(\"T\");  \n  \n  var clearSheet \u003d sheet.getRange(3,1,sheet.getLastRow(), sheet.getLastColumn());\n  clearSheet.clear();\n  \n  var requests \u003d[];\n  \n  var contests \u003d [\"codeforces.com\",\"codechef.com\",\"hackerearth.com\",\"leetcode.com\",\"topcoder.com\",\"atcoder.jp\",\"hackerrank.com\",\"codingcompetitions.withgoogle.com\",\"spoj.com\"];\n  //var contests \u003d [\"spoj.com\"];\n  \n  var url \u003d \"https://clist.by/api/v1/json/contest/\";\n  var query1 \u003d \"?username\u003dhemang\u0026api_key\u003d\u003cAPI_KEY_1\u003e\u0026order_by\u003dstart\";\n  var query2 \u003d \"?username\u003dHemang2\u0026api_key\u003d\u003cAPI_KEY_2\u003e\u0026order_by\u003dstart\";\n  \n  \n  for(var i \u003d 0, l\u003d contests.length; i\u003cl ; i++){\n    \n    var apiurl \u003d url;\n    \n    var obj1 \u003d {\n      \u0027url\u0027: apiurl+ query1 + \"\u0026end__gte\u003d\"+ currentdate + \"\u0026start__lt\u003d\" + currentdate + \"\u0026resource__name\u003d\" + contests[i],\n      \u0027method\u0027 : \u0027get\u0027,\n    };   \n    requests.push(obj1);\n    \n     var obj2 \u003d {\n      \u0027url\u0027: apiurl+ query2 + \"\u0026start__lte\u003d\"+ seconddate + \"\u0026start__gte\u003d\" + currentdate + \"\u0026resource__name\u003d\" + contests[i],\n      \u0027method\u0027 : \u0027get\u0027,\n    };   \n    requests.push(obj2);\n  }  \n  \n  var response \u003d UrlFetchApp.fetchAll(requests);\n  \n  var sheetData \u003d[];\n \n  for(var i \u003d 0; i \u003c response.length ; i++){\n    \n    var json \u003d response[i].getContentText();\n    var data \u003d JSON.parse(json);\n    \n    var objects \u003d data.objects;\n    \n    for(var j\u003d0; j\u003cobjects.length; j++){\n      \n      var val \u003d [];\n      val.push(objects[j].resource.name);\n      val.push(objects[j].id);\n      val.push(objects[j].event);\n      val.push(objects[j].start);\n      val.push(objects[j].end);\n      val.push(objects[j].duration);\n      val.push(objects[j].href);\n      \n      if(i%2\u003d\u003d0) val.push(\"Running\");\n      else val.push(\"Yet To\");\n      \n      sheetData.push(val);\n    } \n  }\n  \n  Logger.log(sheetData);\n  \n  var board \u003d sheet.getRange(3,1,sheetData.length ,8); \n  board.setValues(sheetData);\n  \n  \n}\n\n"},{"id":"eba40d2a-4d38-49a2-8049-4c4d21c8daf3","name":"appsscript","type":"json","source":"{\n  \"timeZone\": \"Asia/Kolkata\",\n  \"dependencies\": {\n  },\n  \"exceptionLogging\": \"STACKDRIVER\",\n  \"runtimeVersion\": \"V8\"\n}"}]}